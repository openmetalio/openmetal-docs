"use strict";(self.webpackChunkopenmetal_docs=self.webpackChunkopenmetal_docs||[]).push([[3402],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=l,k=u["".concat(i,".").concat(h)]||u[h]||d[h]||o;return n?a.createElement(k,r(r({ref:t},p),{},{components:n})):a.createElement(k,r({ref:t},p))}));function h(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:l,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},9793:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return i},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var a=n(7462),l=n(3366),o=(n(7294),n(3905)),r=["components"],s={slug:"/kubernetes-guides/installing-an-openshift-cluster-on-openstack"},i="Installing an OpenShift cluster on OpenStack",c={unversionedId:"engineers-notes/okd",id:"engineers-notes/okd",title:"Installing an OpenShift cluster on OpenStack",description:"We'll be using the following guide to install a OKD Kubernetes cluster on an",source:"@site/docs/engineers-notes/okd.md",sourceDirName:"engineers-notes",slug:"/kubernetes-guides/installing-an-openshift-cluster-on-openstack",permalink:"/docs/manuals/kubernetes-guides/installing-an-openshift-cluster-on-openstack",editUrl:"https://github.com/openmetalio/openmetal-docs/blob/main/docs/engineers-notes/okd.md",tags:[],version:"current",frontMatter:{slug:"/kubernetes-guides/installing-an-openshift-cluster-on-openstack"},sidebar:"tutorialSidebar",previous:{title:"Building Windows Cloud Images on OpenMetal",permalink:"/docs/manuals/engineers-notes/building-windows-cloud-images-on-openmetal"}},p=[{value:"Prerequisites",id:"prerequisites",children:[],level:2},{value:"Setup OpenStack Access",id:"setup-openstack-access",children:[{value:"Installing OpenStack CLI",id:"installing-openstack-cli",children:[],level:3},{value:"Update quotas",id:"update-quotas",children:[],level:3},{value:"Save Password",id:"save-password",children:[],level:3}],level:2},{value:"Prepare Installation",id:"prepare-installation",children:[{value:"Download OKD Installer",id:"download-okd-installer",children:[],level:3},{value:"Generate a key pair",id:"generate-a-key-pair",children:[],level:3},{value:"Add the SSH private key identity to the SSH agent for your local user",id:"add-the-ssh-private-key-identity-to-the-ssh-agent-for-your-local-user",children:[],level:3},{value:"Create floating IPs",id:"create-floating-ips",children:[],level:3},{value:"DNS Configuration",id:"dns-configuration",children:[{value:"Option 1",id:"option-1",children:[],level:4},{value:"Option 2: Add hostfile mods",id:"option-2-add-hostfile-mods",children:[],level:4}],level:3},{value:"Generate Installation Configs",id:"generate-installation-configs",children:[],level:3},{value:"Create Manifest Files",id:"create-manifest-files",children:[],level:3},{value:"Generate Install Configuration",id:"generate-install-configuration",children:[],level:3},{value:"Create Security Group",id:"create-security-group",children:[],level:3},{value:"Update the Install Config",id:"update-the-install-config",children:[],level:3},{value:"Save a copy of the config",id:"save-a-copy-of-the-config",children:[],level:3}],level:2},{value:"Install OKD",id:"install-okd",children:[],level:2},{value:"Verify Installation",id:"verify-installation",children:[{value:"Open Web Console",id:"open-web-console",children:[{value:"Optional - Add the hosts file mods to your local machine",id:"optional---add-the-hosts-file-mods-to-your-local-machine",children:[],level:4},{value:"Web Console Login",id:"web-console-login",children:[],level:4}],level:3},{value:"Test Kubectl",id:"test-kubectl",children:[{value:"Install Kubectl",id:"install-kubectl",children:[],level:4},{value:"Load configuration",id:"load-configuration",children:[],level:4},{value:"List Pods",id:"list-pods",children:[],level:4}],level:3},{value:"OKD Client",id:"okd-client",children:[{value:"Install OKD Client",id:"install-okd-client",children:[],level:4},{value:"Fetch Kubernetes resources using OKD Client",id:"fetch-kubernetes-resources-using-okd-client",children:[],level:4}],level:3}],level:2},{value:"Troubleshooting",id:"troubleshooting",children:[{value:"Restart OKD Installation",id:"restart-okd-installation",children:[{value:"Delete the cluster",id:"delete-the-cluster",children:[],level:4},{value:"Copy the config",id:"copy-the-config",children:[],level:4},{value:"Create the manifests",id:"create-the-manifests",children:[],level:4},{value:"Start Install",id:"start-install",children:[],level:4}],level:3}],level:2}],d={toc:p};function u(e){var t=e.components,s=(0,l.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"installing-an-openshift-cluster-on-openstack"},"Installing an OpenShift cluster on OpenStack"),(0,o.kt)("p",null,"We'll be using the following guide to install a OKD Kubernetes cluster on an\nOpenMetal provisioned OpenStack cloud:\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.okd.io/latest/installing/installing_openstack/installing-openstack-installer-custom.html"},"Installing a cluster on OpenStack with customizations"),".\nFor more information about configuration options please refer to the OKD\ndocumentation. The intent of this guide is to quickly validate the installation\nprocess on an OpenMetal cloud."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"We'll be performing these installation steps on one of the hardware nodes\nprovisioned for your cloud. Make sure that you have deployed a cloud and have\naccess ssh access to the nodes. If deploying from another machine, you may need\nto preform additional steps."),(0,o.kt)("h2",{id:"setup-openstack-access"},"Setup OpenStack Access"),(0,o.kt)("h3",{id:"installing-openstack-cli"},"Installing OpenStack CLI"),(0,o.kt)("p",null,"Complete the following steps to ",(0,o.kt)("a",{parentName:"p",href:"/docs/manuals/operators-manual/day-1/command-line/openstackclient"},"install the OpenStack CLI:"),"."),(0,o.kt)("h3",{id:"update-quotas"},"Update quotas"),(0,o.kt)("p",null,"Remove the following quota limits for the project you plan on using for\nthis installation by setting the value to -1."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"RAM: -1"),(0,o.kt)("li",{parentName:"ul"},"VCPU: -1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"openstack quota set --cores -1 PROJECT_NAME\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"openstack quota set --ram -1 PROJECT_NAME\n")),(0,o.kt)("h3",{id:"save-password"},"Save Password"),(0,o.kt)("p",null,"During the setup process of the OpenStack CLI, you should have created a\n",(0,o.kt)("inlineCode",{parentName:"p"},"clouds.yaml"),". Update that file by adding your password in the ",(0,o.kt)("inlineCode",{parentName:"p"},"auth")," field."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"vim ~/.config/openstack/clouds.yaml\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'clouds:\n   openstack:\n     auth:\n       auth_url: http://my-hostname:5000\n       username: "username"\n       password: "password"\n       ...\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: You can also keep secrets in a separate file:\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.openstack.org/os-client-config/latest/user/configuration.html#splitting-secrets"},"https://docs.openstack.org/os-client-config/latest/user/configuration.html#splitting-secrets"),".")),(0,o.kt)("h2",{id:"prepare-installation"},"Prepare Installation"),(0,o.kt)("h3",{id:"download-okd-installer"},"Download OKD Installer"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir ~/okd/ && cd ~/okd/\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -o openshift-install-linux.tar.gz -L https://github.com/openshift/okd/releases/download/4.11.0-0.okd-2022-07-29-154152/openshift-install-linux-4.11.0-0.okd-2022-07-29-154152.tar.gz\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tar -xvf openshift-install-linux.tar.gz\n")),(0,o.kt)("h3",{id:"generate-a-key-pair"},"Generate a key pair"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-keygen -t ed25519 -N '' -f /root/.ssh/id_okd && chmod 600 /root/.ssh/id_okd\n")),(0,o.kt)("h3",{id:"add-the-ssh-private-key-identity-to-the-ssh-agent-for-your-local-user"},"Add the SSH private key identity to the SSH agent for your local user"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'eval "$(ssh-agent -s)"\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-add /root/.ssh/id_okd\n")),(0,o.kt)("h3",{id:"create-floating-ips"},"Create floating IPs"),(0,o.kt)("p",null,"Record the IP addresses it returns, we'll pass these IPs to the installer later."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'openstack floating ip create --description "API okd test cluster" External\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'openstack floating ip create --description "APPS okd test cluster" External\n')),(0,o.kt)("p",null,"Output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"+---------------------+--------------------------------------+\n| Field               | Value                                |\n+---------------------+--------------------------------------+\n| created_at          | 2022-08-12T22:49:31Z                 |\n| description         | API okd test cluster                 |\n| dns_domain          | None                                 |\n| dns_name            | None                                 |\n| fixed_ip_address    | None                                 |\n| floating_ip_address | 127.0.0.1                            |\n| floating_network_id | 4e08a887-5fa7-4cc1-b106-26ade52e3e5f |\n| id                  | c5c9c416-5ea4-4ebe-8b02-307f6c371b06 |\n| name                | 127.0.0.1                            |\n| port_details        | None                                 |\n| port_id             | None                                 |\n| project_id          | a8df8d1113b444a694f59653b830c1df     |\n| qos_policy_id       | None                                 |\n| revision_number     | 0                                    |\n| router_id           | None                                 |\n| status              | DOWN                                 |\n| subnet_id           | None                                 |\n| tags                | []                                   |\n| tenant_id           | a8df8d1113b444a694f59653b830c1df     |\n| updated_at          | 2022-08-12T22:49:31Z                 |\n+---------------------+--------------------------------------+\n")),(0,o.kt)("h3",{id:"dns-configuration"},"DNS Configuration"),(0,o.kt)("h4",{id:"option-1"},"Option 1"),(0,o.kt)("p",null,"Setup DNS records. ",(0,o.kt)("em",{parentName:"p"},"Recommended for production clusters.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"api.<cluster_name>.<base_domain>.  IN  A  <API_FLOATING_IP>"),(0,o.kt)("li",{parentName:"ul"},"*.apps.<cluster_name>.<base_domain>. IN  A <APPS_FLOATING_IP>"),(0,o.kt)("li",{parentName:"ul"},"api.<cluster_name>.<base_domain>.  IN  A  <API_FLOATING_IP>")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: OKD will fail if it cannot resolve these DNS records to the floating IP\naddresses you selected. If the install does fail for this reason, it will tell\nyou the host is unreachable or no route to host.")),(0,o.kt)("h4",{id:"option-2-add-hostfile-mods"},"Option 2: Add hostfile mods"),(0,o.kt)("p",null,"Add the following to ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),". Replace the floating IPs with the IPs you\ncreated above. You'll need to use this block on several servers.\n",(0,o.kt)("em",{parentName:"p"},"Only recommended for testing purposes.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"API_FLOATING_IP api.okd.testing-okd.com\nAPI_FLOATING_IP api-int.okd.testing-okd.com\nAPPS_FLOATING_IP grafana-openshift-monitoring.apps.okd.testing-okd.com\nAPPS_FLOATING_IP prometheus-k8s-openshift-monitoring.apps.okd.testing-okd.com\nAPPS_FLOATING_IP oauth-openshift.apps.okd.testing-okd.com\nAPPS_FLOATING_IP console-openshift-console.apps.okd.testing-okd.com\nAPPS_FLOATING_IP integrated-oauth-server-openshift-authentication.apps.okd.testing-okd.com\n")),(0,o.kt)("h3",{id:"generate-installation-configs"},"Generate Installation Configs"),(0,o.kt)("h3",{id:"create-manifest-files"},"Create Manifest Files"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir ~/okd/install-directory\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./openshift-install --dir ~/okd/install-directory create manifests\n")),(0,o.kt)("p",null,"You'll be prompted for information about the cluster.  As a reference,\nwe used the following values for each prompt."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Base domain will be the domain you set up DNS or the domain in your hosts file\nmod."),(0,o.kt)("li",{parentName:"ul"},"OKD wants a pull secret. The pull secret is used for making pull requests from\nprivate container image registries. If you have a private registry secret you\ncan provide that. Otherwise, you can use a fake secret the OKD documentation\nprovides: ",(0,o.kt)("inlineCode",{parentName:"li"},'{"auths":{"fake":{"auth":"aWQ6cGFzcwo="}}}'),". Copy and paste that\nentire string into the prompt for pull secret. It will show as a series of\nasterisks.\n",(0,o.kt)("strong",{parentName:"li"},"OKD will fail if the pull secret is not a valid pull secret or the fake secret."),"\nIf you use the fake secret, OKD will pull its container images from public\nrepositories. OKD does cache container images, so you do not have to repull\nthem for every run of OKD. If you use the pull secret provided, Red Hat\noperators will be unavailable. For more information see their ",(0,o.kt)("a",{parentName:"li",href:"https://docs.okd.io/latest/installing/installing_openstack/installing-openstack-installer-custom.html#installation-obtaining-installer_installing-openstack-installer-custom"},"documentation:")),(0,o.kt)("li",{parentName:"ul"},"You must choose a flavor with at least 16 GB memory, 4 vCPUs, and 100 GB\nstorage space. The ",(0,o.kt)("inlineCode",{parentName:"li"},"gp1.xlarge")," flavor has enough resources. OKD will fail\nwith an error about the flavor not having enough RAM or vCPUs if you pick\na small flavor.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'? SSH Public Key /root/.ssh/id_okd.pub\n? Platform openstack\n? Cloud openstack\n? ExternalNetwork External\n? APIFloatingIPAddress <API floating IP address you generated earlier>\n? FlavorName gp1.large\n? Base Domain testing-okd.com\n? Cluster Name okd\n? Pull Secret [? for help] {"auths":{"fake":{"auth":"aWQ6cGFzcwo="}}}\n')),(0,o.kt)("h3",{id:"generate-install-configuration"},"Generate Install Configuration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./openshift-install create install-config --dir ~/okd/install-directory\n")),(0,o.kt)("h3",{id:"create-security-group"},"Create Security Group"),(0,o.kt)("p",null,"Create a security group that allows for SSH access from the host on which\nyou are running the ",(0,o.kt)("inlineCode",{parentName:"p"},"openshift-install")," application. You can get failures\nif the host cannot access the bootstrap node via SSH Provision floating IPs\nfor the project that will host the OKD infrastructure."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"openstack security group create okd-deploy\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'openstack security group rule create okd-deploy \\\n    --protocol TCP --remote-ip YOUR_IP_ADDRESS/32 --description "Allow deployment host"\n')),(0,o.kt)("h3",{id:"update-the-install-config"},"Update the Install Config"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"vim ~/okd/install-directory/install-config.yaml\n")),(0,o.kt)("p",null,"Add security group UUID so the installer can access the cluster. Replace\nthe UUID with the UUID of the security group you created above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'controlPlane:\n  platform:\n    openstack:\n      additionalSecurityGroupIDs: ["7af89a64-3cc0-444f-9273-63f309a003c2"]\n')),(0,o.kt)("p",null,"Specify the IP of the floating IPs you created earlier. The API IP should\nalready be filled in."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"platform:\n  openstack:\n    apiFloatingIP: 127.0.0.1\n    ingressFloatingIP: 127.0.0.2\n")),(0,o.kt)("p",null,"The complete config looks like the following example. You can customize this\nconfig to your needs."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nbaseDomain: okd.testing-okd.com\ncompute:\n- architecture: amd64\n  hyperthreading: Enabled\n  name: worker\n  replicas: 3\ncontrolPlane:\n  architecture: amd64\n  hyperthreading: Enabled\n  name: master\n  platform:\n    openstack:\n      additionalSecurityGroupIDs: ["7af89a64-3cc0-444f-9273-63f309a003c2"]\n  replicas: 3\nmetadata:\n  creationTimestamp: null\n  name: okd\nnetworking:\n  clusterNetwork:\n  - cidr: 10.128.0.0/14\n    hostPrefix: 23\n  machineNetwork:\n  - cidr: 10.0.0.0/16\n  networkType: OVNKubernetes\n  serviceNetwork:\n  - 172.30.0.0/16\nplatform:\n  openstack:\n    apiFloatingIP: 127.0.0.1\n    ingressFloatingIP: 127.0.0.2\n    apiVIP: 10.0.0.5\n    cloud: openstack\n    defaultMachinePlatform:\n      type: gp1.large\n    externalDNS: null\n    externalNetwork: External\n    ingressVIP: 10.0.0.7\npublish: External\npullSecret: \'{"auths":{"fake":{"auth":"aWQ6cGFzcwo="}}}\'\nsshKey: |\n  ssh-ed25519 AAAAC3Nz...\n')),(0,o.kt)("h3",{id:"save-a-copy-of-the-config"},"Save a copy of the config"),(0,o.kt)("p",null,"The installation process will delete your configuration file. Save a copy of\nthe config before running the installer."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cp ~/okd/install-directory/install-config.yaml .\n")),(0,o.kt)("h2",{id:"install-okd"},"Install OKD"),(0,o.kt)("p",null,"This process can take up to an hour. If the process fails, you'll need to\ndelete the cluster and start again. Please see ",(0,o.kt)("a",{parentName:"p",href:"#troubleshooting"},"troubleshooting"),"\nfor more information."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./openshift-install create cluster --dir ~/okd/install-directory/ --log-level=info\n")),(0,o.kt)("p",null,"If everything is successful, you should see URLs to access the API and the\nconsole. There will also be a username and password for the console.\n",(0,o.kt)("strong",{parentName:"p"},"Save the username and password from the log output somewhere safe.")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE!")," If you are deploying with hosts file mods, you'll need to add the\nsame entries to the bootstrapping VM after it's created."),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"watch openstack server list\n"))),(0,o.kt)("h2",{id:"verify-installation"},"Verify Installation"),(0,o.kt)("p",null,"That's it! You've installed OKD onto your OpenStack cloud. Now you can verify\nthat the installation was successful and deploy your own workloads."),(0,o.kt)("h3",{id:"open-web-console"},"Open Web Console"),(0,o.kt)("h4",{id:"optional---add-the-hosts-file-mods-to-your-local-machine"},"Optional - Add the hosts file mods to your local machine"),(0,o.kt)("p",null,"Use the same entries you've added to the previous servers and add them to your\nlocal machine."),(0,o.kt)("h4",{id:"web-console-login"},"Web Console Login"),(0,o.kt)("p",null,"Navigate to ",(0,o.kt)("a",{parentName:"p",href:"https://console-openshift-console.apps.okd.testing-okd.com/dashboards"},"https://console-openshift-console.apps.okd.testing-okd.com/dashboards")),(0,o.kt)("p",null,"Use the username and password that were output after you completed the\ninstallation. If you forget to save the password, the password is stored\nin the ",(0,o.kt)("inlineCode",{parentName:"p"},"auth")," folder in the current directory in the ",(0,o.kt)("inlineCode",{parentName:"p"},"kubeadmin-password")," file."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"OKD Web Console on OpenMetal",src:n(8932).Z})),(0,o.kt)("h3",{id:"test-kubectl"},"Test Kubectl"),(0,o.kt)("h4",{id:"install-kubectl"},"Install Kubectl"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n")),(0,o.kt)("h4",{id:"load-configuration"},"Load configuration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," export KUBECONFIG=/root/okd/install-directory/auth/kubeconfig\n")),(0,o.kt)("h4",{id:"list-pods"},"List Pods"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"[root@silly-quokka okd]# kubectl get pods -A\nNAMESPACE                                          NAME                                                         READY   STATUS             RESTARTS      AGE\nopenshift-apiserver-operator                       openshift-apiserver-operator-5686496c75-b6ngv                1/1     Running            1 (84m ago)   88m\nopenshift-apiserver                                apiserver-55b764f57-cp7w9                                    2/2     Running            0             76m\nopenshift-apiserver                                apiserver-55b764f57-ktq9c                                    2/2     Running            0             77m\nopenshift-apiserver                                apiserver-55b764f57-tf96q                                    2/2     Running            0             75m\nopenshift-authentication-operator                  authentication-operator-79647548ff-9pv9j                     1/1     Running            1 (84m ago)   88m\nopenshift-authentication                           oauth-openshift-75cb6567b6-6ltrr                             1/1     Running            0             69m\nopenshift-authentication                           oauth-openshift-75cb6567b6-n845d                             1/1     Running            0             68m\nopenshift-authentication                           oauth-openshift-75cb6567b6-qtfcf                             1/1     Running            0             69m\nopenshift-cloud-controller-manager-operator        cluster-cloud-controller-manager-operator-54f49d867f-gzjlh   2/2     Running            0             87m\nopenshift-cloud-credential-operator                cloud-credential-operator-7c4bbc8654-c6ckq                   2/2     Running            0             88m\nopenshift-cluster-csi-drivers                      manila-csi-driver-operator-b4dfc5874-frvlj                   1/1     Running            0             84m\nopenshift-cluster-csi-drivers                      openstack-cinder-csi-driver-controller-6b56dfff86-f5zfb      10/10   Running            0             82m\nopenshift-cluster-csi-drivers                      openstack-cinder-csi-driver-controller-6b56dfff86-wdh98      10/10   Running            0             85m\nopenshift-cluster-csi-drivers                      openstack-cinder-csi-driver-node-7v6sj                       3/3     Running            0             76m\n...\n")),(0,o.kt)("h3",{id:"okd-client"},"OKD Client"),(0,o.kt)("h4",{id:"install-okd-client"},"Install OKD Client"),(0,o.kt)("p",null,"To verify operation, download the OKD client from the OKD GitHub ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/openshift/okd/releases"},"releases page:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -OL https://github.com/openshift/okd/releases/download/4.11.0-0.okd-2022-07-29-154152/openshift-client-linux-4.11.0-0.okd-2022-07-29-154152.tar.gz\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tar -xvf openshift-client-linux-4.11.0-0.okd-2022-07-29-154152.tar.gz\n")),(0,o.kt)("h4",{id:"fetch-kubernetes-resources-using-okd-client"},"Fetch Kubernetes resources using OKD Client"),(0,o.kt)("p",null,"Run the following OKD client commands using the ",(0,o.kt)("inlineCode",{parentName:"p"},"oc")," binary:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"./oc get nodes")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"./oc get clusterversion")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"./oc get clusteroperator")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"./oc get pods -A"))),(0,o.kt)("p",null,"Output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"(venv) [root@silly-quokka test]# ./oc get nodes\nNAME                       STATUS   ROLES    AGE     VERSION\nokd-dstmh-master-0         Ready    master   3h35m   v1.24.0+9546431\nokd-dstmh-master-1         Ready    master   3h35m   v1.24.0+9546431\nokd-dstmh-master-2         Ready    master   3h35m   v1.24.0+9546431\nokd-dstmh-worker-0-gbr8f   Ready    worker   3h24m   v1.24.0+9546431\nokd-dstmh-worker-0-l868x   Ready    worker   3h24m   v1.24.0+9546431\nokd-dstmh-worker-0-mjzlr   Ready    worker   3h24m   v1.24.0+9546431\n")),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("h3",{id:"restart-okd-installation"},"Restart OKD Installation"),(0,o.kt)("h4",{id:"delete-the-cluster"},"Delete the cluster"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./openshift-install destroy cluster --dir ~/okd/install-directory/ --log-level=info\n")),(0,o.kt)("h4",{id:"copy-the-config"},"Copy the config"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cp install-config.yaml ~/okd/install-directory/\n")),(0,o.kt)("h4",{id:"create-the-manifests"},"Create the manifests"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./openshift-install --dir ~/okd/install-directory create manifests\n")),(0,o.kt)("h4",{id:"start-install"},"Start Install"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./openshift-install create cluster --dir ~/okd/install-directory/ --log-level=info\n")))}u.isMDXComponent=!0},8932:function(e,t,n){t.Z=n.p+"assets/images/okd-web-console-67ee6b6f86e9db2a5fb104befe0aae44.jpg"}}]);