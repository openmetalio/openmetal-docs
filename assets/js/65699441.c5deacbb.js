"use strict";(self.webpackChunkopenmetal_docs=self.webpackChunkopenmetal_docs||[]).push([[9996],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),h=o,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||a;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[u]="string"==typeof e?e:o,i[1]=p;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},22471:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var r=n(87462),o=(n(67294),n(3905));const a={},i="How to Prepare and Use Ceph Ansible",p={unversionedId:"day-4/ceph-ansible/prepare-ceph-ansible",id:"version-1.0/day-4/ceph-ansible/prepare-ceph-ansible",title:"How to Prepare and Use Ceph Ansible",description:"Introduction",source:"@site/operators_versioned_docs/version-1.0/day-4/ceph-ansible/prepare-ceph-ansible.md",sourceDirName:"day-4/ceph-ansible",slug:"/day-4/ceph-ansible/prepare-ceph-ansible",permalink:"/docs/manuals/operators-manual/operators_versioned_docs/version-1.0/day-4/ceph-ansible/prepare-ceph-ansible",draft:!1,editUrl:"https://github.com/openmetalio/openmetal-docs/blob/main/operators_versioned_docs/version-1.0/day-4/ceph-ansible/prepare-ceph-ansible.md",tags:[],version:"1.0",frontMatter:{},sidebar:"operatorsSidebar",previous:{title:"Security and Your OpenMetal Private Cloud",permalink:"/docs/manuals/operators-manual/operators_versioned_docs/version-1.0/day-4/security/security-best-practices"},next:{title:"OpenStack Watcher Demonstration",permalink:"/docs/manuals/operators-manual/operators_versioned_docs/version-1.0/day-4/watcher/watcher-demo"}},l={},s=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Root Access to OpenStack Control Plane",id:"root-access-to-openstack-control-plane",level:3},{value:"Path to the Ceph Configuration Files",id:"path-to-the-ceph-configuration-files",level:3},{value:"Preparation",id:"preparation",level:2}],c={toc:s};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"how-to-prepare-and-use-ceph-ansible"},"How to Prepare and Use Ceph Ansible"),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Should you want to reconfigure your Private Cloud's Ceph cluster, you\ncan do so using Ceph Ansible. In this guide, we explain how to prepare\nan environment from which Ceph Ansible can be used. Making specific\nconfiguration changes to your Ceph cluster is outside the scope of this\nguide."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("h3",{id:"root-access-to-openstack-control-plane"},"Root Access to OpenStack Control Plane"),(0,o.kt)("p",null,"Root access to your cloud's control plane nodes is required."),(0,o.kt)("h3",{id:"path-to-the-ceph-configuration-files"},"Path to the Ceph Configuration Files"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Ceph Ansible Inventory",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/etc/fm-deploy/ceph-inventory.yml")))),(0,o.kt)("li",{parentName:"ul"},"Ceph Ansible Config",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/opt/ceph-ansible/group_vars/all.yml"))))),(0,o.kt)("h2",{id:"preparation"},"Preparation"),(0,o.kt)("p",null,"To prepare Ceph Ansible:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker cp fm-deploy:/opt/ceph-ansible /opt/ceph-ansible\nchmod 700 /opt/ceph-ansible\ncd /opt/ceph-ansible\nvirtualenv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\npip install six\n")),(0,o.kt)("p",null,"Deploy a Ceph Cluster:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ansible-playbook \\\n    -i /etc/fm-deploy/ceph-inventory.yml \\\n    --private-key /root/.ssh/fm-deploy \\\n    /opt/ceph-ansible/site.yml\n")),(0,o.kt)("p",null,"Attempt to repair a broken Ceph cluster:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ansible-playbook \\\n    -i /etc/fm-deploy/ceph-inventory.yml \\\n    --private-key /root/.ssh/fm-deploy \\\n    /opt/ceph-ansible/site.yml\n")))}u.isMDXComponent=!0}}]);