"use strict";(self.webpackChunkopenmetal_docs=self.webpackChunkopenmetal_docs||[]).push([[7854],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(n),c=r,h=m["".concat(s,".").concat(c)]||m[c]||d[c]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},56846:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={},o="Installing Proxmox VE on Bare Metal",l={unversionedId:"baremetal/tutorials/installing-proxmox-VE-on-bare-metal",id:"baremetal/tutorials/installing-proxmox-VE-on-bare-metal",title:"Installing Proxmox VE on Bare Metal",description:"Author: Nemanja Ilic",source:"@site/docs/baremetal/tutorials/installing-proxmox-VE-on-bare-metal.md",sourceDirName:"baremetal/tutorials",slug:"/baremetal/tutorials/installing-proxmox-VE-on-bare-metal",permalink:"/docs/manuals/baremetal/tutorials/installing-proxmox-VE-on-bare-metal",draft:!1,editUrl:"https://github.com/openmetalio/openmetal-docs/blob/main/docs/baremetal/tutorials/installing-proxmox-VE-on-bare-metal.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"OpenMetal Infrastructure Explained",permalink:"/docs/manuals/baremetal/tutorials/baremetal-networking"},next:{title:"OpenStack Operator's Manual - Private Cloud Core",permalink:"/docs/manuals/operators-manual/"}},s={},p=[{value:"Where to Get Proxmox VE",id:"where-to-get-proxmox-ve",level:2},{value:"Start the Proxmox Installation",id:"start-the-proxmox-installation",level:2},{value:"Correcting the Network Configuration",id:"correcting-the-network-configuration",level:2},{value:"In plain English",id:"in-plain-english",level:3},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Wrapping Up",id:"wrapping-up",level:2},{value:"Creating Virtual Machines on Proxmox",id:"creating-virtual-machines-on-proxmox",level:2},{value:"Step 1: Upload an ISO Image",id:"step-1-upload-an-iso-image",level:3},{value:"Step 2: Create a New VM",id:"step-2-create-a-new-vm",level:3},{value:"Step 3: Select the ISO",id:"step-3-select-the-iso",level:3},{value:"Step 4: Configure System Resources",id:"step-4-configure-system-resources",level:3},{value:"Step 5: Configure Networking",id:"step-5-configure-networking",level:3},{value:"Step 6: Finish and Start",id:"step-6-finish-and-start",level:3},{value:"What This Means in Practice",id:"what-this-means-in-practice",level:2},{value:"Configuring Networking During Ubuntu VM Installation",id:"configuring-networking-during-ubuntu-vm-installation",level:2},{value:"Verifying That the VM Works",id:"verifying-that-the-vm-works",level:2},{value:"1. Check the VM\u2019s IP Address",id:"1-check-the-vms-ip-address",level:3},{value:"2. Test Connectivity to the Proxmox Host",id:"2-test-connectivity-to-the-proxmox-host",level:3},{value:"3. Test Internet Connectivity",id:"3-test-internet-connectivity",level:3},{value:"4. Update the System",id:"4-update-the-system",level:3},{value:"5. Confirm NAT Is Working",id:"5-confirm-nat-is-working",level:3},{value:"Conclusion",id:"conclusion",level:2}],u={toc:p};function m(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"installing-proxmox-ve-on-bare-metal"},"Installing Proxmox VE on Bare Metal"),(0,r.kt)("p",null,"Author: Nemanja Ilic"),(0,r.kt)("p",null,"If you\u2019ve ever wanted to turn a physical server into a full-featured\nvirtualization host, ",(0,r.kt)("strong",{parentName:"p"},"Proxmox Virtual Environment (Proxmox VE)")," is one of the\nbest open-source platforms you can use. It combines KVM virtualization and LXC\ncontainers with an easy-to-use web interface, clustering support, storage\nmanagement, and advanced networking features."),(0,r.kt)("p",null,"Proxmox is widely used by homelab enthusiasts, small businesses, and even\nenterprise deployments because it offers flexibility without licensing costs.\nWith it, you can create and manage virtual machines (VMs), set up private\nnetworks, and even run complex high-availability clusters."),(0,r.kt)("h2",{id:"where-to-get-proxmox-ve"},"Where to Get Proxmox VE"),(0,r.kt)("p",null,"You can download Proxmox VE directly from the ",(0,r.kt)("a",{parentName:"p",href:"https://www.proxmox.com/en/downloads"},"official website"),".\nThe ISO installer is what you\u2019ll use to install it onto your bare metal server."),(0,r.kt)("p",null,"The installation process is straightforward and not very different from\ninstalling a typical Linux distribution, but the most important part comes\nlater: configuring the ",(0,r.kt)("strong",{parentName:"p"},"networking"),". That\u2019s what will let you connect to\nthe Proxmox web interface and make your virtual machines usable."),(0,r.kt)("h2",{id:"start-the-proxmox-installation"},"Start the Proxmox Installation"),(0,r.kt)("p",null,"First, you\u2019ll need to mount an ISO downloaded from the official website.\nFor this guide, we used ",(0,r.kt)("strong",{parentName:"p"},"proxmox-ve_8.4-1.iso")," and mounted it through IPMI."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Mount ISO",src:n(15254).Z,width:"1164",height:"934"})),(0,r.kt)("p",null,"Once you boot the server from the Proxmox ISO, you\u2019ll see the installation\nwelcome screen:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Proxmox Installer",src:n(8740).Z,width:"2064",height:"1554"})),(0,r.kt)("p",null,"Here, we chose ",(0,r.kt)("strong",{parentName:"p"},"Proxmox VE (Graphical) Installation"),"."),(0,r.kt)("p",null,"The installer will walk you through a few steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Selecting the installation target disk:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("img",{alt:"Disk Selection",src:n(23290).Z,width:"2064",height:"1552"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Choosing a filesystem (ZFS, ext4, XFS, btrfs - ZFS is common for redundancy\nif you have multiple disks):"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Filesystem",src:n(68047).Z,width:"2078",height:"1556"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Setting your location and time zone:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("img",{alt:"Time Zone, Location",src:n(28706).Z,width:"2072",height:"1554"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Set the admin password and email:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("img",{alt:"Admin setup",src:n(24931).Z,width:"2074",height:"1556"})))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Keep in mind that this password will be used both for logging into the\nweb UI and for SSH access to the server after the installation is complete.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Configuring management network settings:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("img",{alt:"MGMT network",src:n(91310).Z,width:"2068",height:"1556"})))),(0,r.kt)("p",null,"At this stage, you\u2019ll be asked to set a hostname, IP address, gateway,\nand DNS server."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"This is a common stumbling point,")," especially in data center environments\nwith VLANs or routed subnets. If you enter the wrong details, the installation\nwill still complete, but you won\u2019t be able to reach the web interface at\n",(0,r.kt)("inlineCode",{parentName:"p"},"https://your-server-ip:8006"),". Don\u2019t panic though, you can fix this afterward,\nand we\u2019ll walk you through the steps later in this guide."),(0,r.kt)("p",null,"Here is our summary of all of the options we chose:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Summary",src:n(29706).Z,width:"2056",height:"1560"})),(0,r.kt)("p",null,"After confirming everything is set, click ",(0,r.kt)("strong",{parentName:"p"},"Install")," and wait for the process\nto complete."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Installation",src:n(69005).Z,width:"2062",height:"1550"})),(0,r.kt)("h2",{id:"correcting-the-network-configuration"},"Correcting the Network Configuration"),(0,r.kt)("p",null,"Once the installation is complete, if you can\u2019t access the web interface at the\nIP shown on the Proxmox welcome screen, don\u2019t worry. The good news is that even\nif something went wrong during setup, you can easily fix it afterward. Proxmox\nnetworking is managed through the familiar Debian\nfile: ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/network/interfaces"),"."),(0,r.kt)("p",null,"Here\u2019s an example of a corrected configuration we used for a Proxmox host\nnamed ",(0,r.kt)("inlineCode",{parentName:"p"},"stormy-dino")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# /etc/network/interfaces\n# Proxmox host networking - stormy-dino\n\nauto lo\niface lo inet loopback\n\n# --- Physical NICs (bonded) ---\niface enp82s0f0np0 inet manual\niface enp82s0f1np1 inet manual\n\nauto bond0\niface bond0 inet manual\n    bond-slaves enp82s0f0np0 enp82s0f1np1\n    bond-miimon 100\n    bond-mode 802.3ad\n    bond-xmit-hash-policy layer2+3\n\n# --- Public / Management (Inventory VLAN 365) ---\nauto bond0.365\niface bond0.365 inet manual\n    vlan-raw-device bond0\n\nauto vmbr0\niface vmbr0 inet static\n    address 173.231.226.213/28\n    gateway 173.231.226.209\n    bridge-ports bond0.365\n    bridge-stp off\n    bridge-fd 0\n    dns-nameservers 8.8.8.8\n\n# --- Private VM Network (Compute VLAN 366) ---\nauto bond0.366\niface bond0.366 inet manual\n    vlan-raw-device bond0\n\nauto vmbr1\niface vmbr1 inet static\n    address 192.168.2.1/24\n    bridge-ports bond0.366\n    bridge-stp off\n    bridge-fd 0\n\n    # Enable IP forwarding\n    post-up   sysctl -w net.ipv4.ip_forward=1\n\n    # NAT: VMs on 192.168.2.0/24 go out via public (vmbr0)\n    post-up   iptables -t nat -A POSTROUTING -s 192.168.2.0/24 -o vmbr0 -j MASQUERADE\n    post-down iptables -t nat -D POSTROUTING -s 192.168.2.0/24 -o vmbr0 -j MASQUERADE\n\n    # Forwarding rules\n    post-up   iptables -A FORWARD -i vmbr1 -o vmbr0 -j ACCEPT\n    post-up   iptables -A FORWARD -i vmbr0 -o vmbr1 -m state --state RELATED,ESTABLISHED -j ACCEPT\n    post-down iptables -D FORWARD -i vmbr1 -o vmbr0 -j ACCEPT\n    post-down iptables -D FORWARD -i vmbr0 -o vmbr1 -m state --state RELATED,ESTABLISHED -j ACCEPT\n\n# --- Provider VLAN (376) for Public VM IPs ---\nauto bond0.376\niface bond0.376 inet manual\n    vlan-raw-device bond0\n\nauto vmbr2\niface vmbr2 inet manual\n    bridge-ports bond0.376\n    bridge-stp off\n    bridge-fd 0\n\n# --- Optional VLANs (ready to be enabled if needed) ---\n\n# Control VLAN 367\n# auto bond0.367\n# iface bond0.367 inet manual\n#     vlan-raw-device bond0\n# auto vmbr3\n# iface vmbr3 inet manual\n#     bridge-ports bond0.367\n#     bridge-stp off\n#     bridge-fd 0\n\n# Storage VLAN 374\n# auto bond0.374\n# iface bond0.374 inet manual\n#     vlan-raw-device bond0\n# auto vmbr4\n# iface vmbr4 inet manual\n#     bridge-ports bond0.374\n#     bridge-stp off\n#     bridge-fd 0\n\n# Tunnel VLAN 375\n# auto bond0.375\n# iface bond0.375 inet manual\n#     vlan-raw-device bond0\n# auto vmbr5\n# iface vmbr5 inet manual\n#     bridge-ports bond0.375\n#     bridge-stp off\n#     bridge-fd 0\n\nsource /etc/network/interfaces.d/*\n")),(0,r.kt)("p",null,"and simply reload the configuration with ",(0,r.kt)("inlineCode",{parentName:"p"},"ifreload -a"),"."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The IP addresses, gateways, and VLAN IDs shown here\n(e.g., 173.231.226.213/28, VLAN 365, 366, and 376)\nare specific to our environment. In your setup, you\u2019ll\nneed to use the subnets and VLANs assigned to you in OpenMetal Central\n(or by your own network team). The structure of the configuration will\nbe the same, but the actual values, IP ranges, gateway, and VLAN IDs\nshould match your project\u2019s allocation.")),(0,r.kt)("h3",{id:"in-plain-english"},"In plain English"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"bond0"),": combines two NICs into one logical interface with LACP for\nredundancy and better throughput.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"vmbr0"),": management bridge on VLAN 365 (Inventory) with the host\u2019s\npublic IP (",(0,r.kt)("inlineCode",{parentName:"p"},"173.231.226.213"),"). This is how you reach the Proxmox web UI\nand manage the server.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"vmbr1"),": private bridge on VLAN 366 with NAT. Any VM connected here\ngets a private IP (",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.2.x"),") and reaches the internet through the host.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"vmbr2"),": provider bridge on VLAN 376. Any VM connected here can be assigned\na ",(0,r.kt)("strong",{parentName:"p"},"routed public IP")," (",(0,r.kt)("inlineCode",{parentName:"p"},"173.231.226.226\u2013.238"),") and is directly reachable from\nthe internet."))),(0,r.kt)("p",null,"This setup gives you three distinct options:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"A stable management plane (",(0,r.kt)("inlineCode",{parentName:"p"},"vmbr0"),").")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Safe internal networks with internet access (",(0,r.kt)("inlineCode",{parentName:"p"},"vmbr1"),").")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Public-facing services on dedicated routed IPs (",(0,r.kt)("inlineCode",{parentName:"p"},"vmbr2"),")."))),(0,r.kt)("h2",{id:"why-this-matters"},"Why This Matters"),(0,r.kt)("p",null,"During installation, Proxmox might only configure\na ",(0,r.kt)("strong",{parentName:"p"},"single NIC with a static IP"),". In our case, the installer\nsuggested ",(0,r.kt)("inlineCode",{parentName:"p"},"173.231.226.208")," as the address, which wasn\u2019t the right choice."),(0,r.kt)("p",null,"We corrected it afterward to use:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"173.231.226.213/28")," as the host\u2019s management IP on\nthe ",(0,r.kt)("strong",{parentName:"p"},"Inventory VLAN (365)"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"173.231.226.209")," as the correct gateway for the management network"))),(0,r.kt)("p",null,"This ensured the Proxmox host could reach the outside world, DNS worked\nproperly, and the web interface was accessible."),(0,r.kt)("h2",{id:"wrapping-up"},"Wrapping Up"),(0,r.kt)("p",null,"At this point, Proxmox VE is installed and reachable. You can log in at:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"https://<your-server-ip>:8006\n")),(0,r.kt)("p",null,"from any browser. The corrected ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/network/interfaces")," ensures your host has\nthe right management IP and that your virtual machines can use NAT to reach the\ninternet."),(0,r.kt)("p",null,"This aligns closely with how ",(0,r.kt)("strong",{parentName:"p"},"OpenMetal\u2019s Infrastructure")," is structured\n(",(0,r.kt)("a",{parentName:"p",href:"https://openmetal.io/docs/manuals/baremetal/tutorials/baremetal-networking"},"see the documentation here"),"),\nbut tailored to a standalone Proxmox server."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Proxmox UI",src:n(2427).Z,width:"2880",height:"1628"})),(0,r.kt)("p",null,"Once you\u2019re logged in, head over to ",(0,r.kt)("strong",{parentName:"p"},"Updates > Repositories")," and make sure\nyour repositories are up to date. For this test, we used\nthe ",(0,r.kt)("strong",{parentName:"p"},"No-Subscription")," repository."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"No subscription",src:n(15780).Z,width:"1594",height:"592"})),(0,r.kt)("p",null,"Disable Enterprise repositories:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Disable Enterprise",src:n(31027).Z,width:"1950",height:"634"})),(0,r.kt)("p",null,"Then go back to the ",(0,r.kt)("strong",{parentName:"p"},"Updates")," tab and click ",(0,r.kt)("strong",{parentName:"p"},"Upgrade")," at the top of the\nscreen to apply the updates."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Upgrade repos",src:n(21079).Z,width:"910",height:"686"})),(0,r.kt)("p",null,"Once we have all the upgrades, we can start working on VM creation."),(0,r.kt)("h2",{id:"creating-virtual-machines-on-proxmox"},"Creating Virtual Machines on Proxmox"),(0,r.kt)("p",null,"Once Proxmox is installed and networking is properly configured, the real fun\nbegins: spinning up virtual machines (VMs). VMs are the reason you installed\nProxmox in the first place - they let you run multiple isolated operating\nsystems on the same physical hardware."),(0,r.kt)("p",null,"In our case, we set up three key bridges:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"vmbr0")," \u2192 Public management bridge on VLAN 365, used by the Proxmox host\nitself.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"vmbr1")," \u2192 Private NATed bridge on VLAN 366. VMs here get private\nIPs (",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.2.x"),") with internet access through NAT. We will cover this setup\nin detail below.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"vmbr2")," \u2192 Provider bridge on VLAN 376. Attach a VM here if it needs a\ndedicated public IP address and direct exposure to the internet."))),(0,r.kt)("p",null,"This design gives us maximum flexibility: management access through Inventory\nVLAN, internal VMs with NAT for private workloads, and routed public IPs for\ninternet-facing services - closely aligned with OpenMetal\u2019s bare metal\nnetworking model shown in the diagram bellow:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Diagram",src:n(77099).Z,width:"1238",height:"1530"})),(0,r.kt)("h3",{id:"step-1-upload-an-iso-image"},"Step 1: Upload an ISO Image"),(0,r.kt)("p",null,"Before you can create a VM, you need an installation ISO for the operating\nsystem you want to run (e.g., Ubuntu, Debian, Windows)."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Log into the Proxmox web interface at ",(0,r.kt)("inlineCode",{parentName:"p"},"https://your-public-ip:8006"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to your Proxmox node in the left sidebar.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go to ",(0,r.kt)("strong",{parentName:"p"},"Local (storage)")," \u2192 ",(0,r.kt)("strong",{parentName:"p"},"ISO Images"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Upload"),", then select the ISO from your computer."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Upload ISO",src:n(17971).Z,width:"2878",height:"658"})))),(0,r.kt)("h3",{id:"step-2-create-a-new-vm"},"Step 2: Create a New VM"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"At the top right of the Proxmox UI, click ",(0,r.kt)("strong",{parentName:"li"},"Create VM"),"."),(0,r.kt)("li",{parentName:"ol"},"Fill in the general settings:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Node"),": Choose your server (in our case, ",(0,r.kt)("inlineCode",{parentName:"li"},"stormy-dino"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"VM ID"),": Leave the default or set your own."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Name"),": Something descriptive, like ",(0,r.kt)("inlineCode",{parentName:"li"},"ubuntu-nat")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"win-test"),".")))),(0,r.kt)("h3",{id:"step-3-select-the-iso"},"Step 3: Select the ISO"),(0,r.kt)("p",null,"In the ",(0,r.kt)("strong",{parentName:"p"},"OS")," step:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Choose the ISO image you uploaded earlier."),(0,r.kt)("li",{parentName:"ul"},"Proxmox should detect the OS type (Linux, Windows, etc.) automatically.")),(0,r.kt)("h3",{id:"step-4-configure-system-resources"},"Step 4: Configure System Resources"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CPU"),": Assign the number of cores."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Memory"),": Allocate RAM (e.g., 4096 MB = 4 GB)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Disk"),": Pick storage size and the storage backend (local ZFS in our case).")),(0,r.kt)("h3",{id:"step-5-configure-networking"},"Step 5: Configure Networking"),(0,r.kt)("p",null,"This is where our ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/network/interfaces")," setup comes into play."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If you want the VM to be ",(0,r.kt)("strong",{parentName:"li"},"publicly reachable with a dedicated IP"),",\nselect ",(0,r.kt)("strong",{parentName:"li"},"vmbr2")," (Provider VLAN 376)."),(0,r.kt)("li",{parentName:"ul"},"If you want the VM to use the ",(0,r.kt)("strong",{parentName:"li"},"Proxmox host\u2019s management network"),",\nselect ",(0,r.kt)("strong",{parentName:"li"},"vmbr0")," (Inventory VLAN 365)."),(0,r.kt)("li",{parentName:"ul"},"If you want the VM to live in the ",(0,r.kt)("strong",{parentName:"li"},"private network with NAT"),",\nselect ",(0,r.kt)("strong",{parentName:"li"},"vmbr1")," (Compute VLAN 366).")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"VM Network",src:n(51373).Z,width:"1440",height:"1070"})),(0,r.kt)("p",null,"For example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("strong",{parentName:"li"},"production web server")," \u2192 ",(0,r.kt)("strong",{parentName:"li"},"vmbr2")," (Provider VLAN, public IP)."),(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("strong",{parentName:"li"},"management or utility VM")," \u2192 ",(0,r.kt)("strong",{parentName:"li"},"vmbr0")," (Inventory VLAN)."),(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("strong",{parentName:"li"},"test Ubuntu VM or internal database")," \u2192 ",(0,r.kt)("strong",{parentName:"li"},"vmbr1")," (private, NATed).")),(0,r.kt)("h3",{id:"step-6-finish-and-start"},"Step 6: Finish and Start"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Review your settings.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Finish"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Start the VM and open the console to complete the OS installation."),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("img",{alt:"VM summary",src:n(6990).Z,width:"1436",height:"1094"})))),(0,r.kt)("h2",{id:"what-this-means-in-practice"},"What This Means in Practice"),(0,r.kt)("p",null,"Thanks to our earlier network configuration, you now have three clear\nnetworking options for VMs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vmbr0 (Inventory VLAN 365)")," \u2192 Used for Proxmox management and utility\nVMs on the inventory network."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vmbr1 (Compute VLAN 366, NAT)")," \u2192 Any VM connected here automatically has\ninternet access without needing a public IP. That\u2019s because we enabled NAT\nrules in ",(0,r.kt)("inlineCode",{parentName:"li"},"/etc/network/interfaces"),", allowing VMs in ",(0,r.kt)("inlineCode",{parentName:"li"},"192.168.2.0/24")," to reach\nthe internet through the host\u2019s public interface."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vmbr2 (Provider VLAN 376)")," \u2192 Assign public IPs to VMs here when you need\nthem to be directly reachable from the internet. Below is an example of a\npublic-facing VM running a simple webpage served by the Nginx web server:")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Stormy VM",src:n(27355).Z,width:"1610",height:"576"})),(0,r.kt)("p",null,"This setup makes it easy to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Keep internal systems private."),(0,r.kt)("li",{parentName:"ul"},"Only expose what you must to the public internet."),(0,r.kt)("li",{parentName:"ul"},"Mimic a real data center-like environment, just like OpenMetal does.")),(0,r.kt)("h2",{id:"configuring-networking-during-ubuntu-vm-installation"},"Configuring Networking During Ubuntu VM Installation"),(0,r.kt)("p",null,"When creating an Ubuntu VM and attaching it to ",(0,r.kt)("inlineCode",{parentName:"p"},"vmbr1"),", the guest won\u2019t\nautomatically get an IP address. Why? Because there\u2019s no DHCP server handing\nout addresses on that bridge. Instead, we set a static IP manually during\ninstallation."),(0,r.kt)("p",null,"On the ",(0,r.kt)("strong",{parentName:"p"},"Network configuration")," screen, choose ",(0,r.kt)("strong",{parentName:"p"},"Manual")," instead of DHCP,\nand then enter:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Subnet:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"192.168.2.0/24")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Address:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"192.168.2.10")," (or any free IP in that range)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Gateway:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"192.168.2.1")," (the Proxmox host\u2019s IP on vmbr1)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Nameserver:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"8.8.8.8")," (or your preferred DNS server)")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Ubuntu Network",src:n(3207).Z,width:"1716",height:"1064"})),(0,r.kt)("p",null,"Once the installation finishes, your VM will:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Use ",(0,r.kt)("inlineCode",{parentName:"li"},"192.168.2.10")," as its private IP."),(0,r.kt)("li",{parentName:"ul"},"Route traffic through ",(0,r.kt)("inlineCode",{parentName:"li"},"192.168.2.1")," (Proxmox) and reach the internet via NAT."),(0,r.kt)("li",{parentName:"ul"},"Stay invisible from the outside world unless you explicitly forward ports.")),(0,r.kt)("p",null,"This is the clean, safe way to give test VMs internet access without burning\npublic IPs."),(0,r.kt)("h2",{id:"verifying-that-the-vm-works"},"Verifying That the VM Works"),(0,r.kt)("p",null,"At this point, your Ubuntu VM is installed and running but we shouldn\u2019t just\nassume the networking is working, let\u2019s prove it step by step instead."),(0,r.kt)("h3",{id:"1-check-the-vms-ip-address"},"1. Check the VM\u2019s IP Address"),(0,r.kt)("p",null,"Inside the VM, run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ip a\n")),(0,r.kt)("p",null,"You should see the private IP you set during installation (for\nexample ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.2.10"),"). This confirms the VM actually picked up the correct\nconfiguration."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ip a",src:n(38091).Z,width:"1458",height:"496"})),(0,r.kt)("h3",{id:"2-test-connectivity-to-the-proxmox-host"},"2. Test Connectivity to the Proxmox Host"),(0,r.kt)("p",null,"Your Proxmox host (the NAT gateway) lives at ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.2.1"),". To test that the\nVM can reach it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ping -c3 192.168.2.1\n")),(0,r.kt)("p",null,"If you get replies, it means your VM can talk to its gateway."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Ping",src:n(38648).Z,width:"904",height:"296"})),(0,r.kt)("h3",{id:"3-test-internet-connectivity"},"3. Test Internet Connectivity"),(0,r.kt)("p",null,"Since NAT is enabled on Proxmox, the VM should be able to reach the internet.\nTest it by pinging:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ping -c3 8.8.8.8\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Ping2",src:n(32637).Z,width:"908",height:"292"})),(0,r.kt)("p",null,"This checks raw connectivity. Then check DNS resolution:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ping -c3 google.com\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Ping Google",src:n(85116).Z,width:"1314",height:"292"})),(0,r.kt)("p",null,"If both succeed, your VM can resolve hostnames and reach the outside world."),(0,r.kt)("h3",{id:"4-update-the-system"},"4. Update the System"),(0,r.kt)("p",null,"To make sure everything really works, run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update\n")),(0,r.kt)("p",null,"This pulls the latest package lists from Ubuntu\u2019s servers. If you see\nrepositories being updated, you\u2019re golden."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Ubuntu Update",src:n(99338).Z,width:"1454",height:"1112"})),(0,r.kt)("p",null,"This confirms that the private VM network (",(0,r.kt)("inlineCode",{parentName:"p"},"vmbr1"),") is working correctly\n\u2014 traffic flows out through the Proxmox host and into the internet,\nexactly as designed."),(0,r.kt)("h3",{id:"5-confirm-nat-is-working"},"5. Confirm NAT Is Working"),(0,r.kt)("p",null,"One last neat trick: check what public IP your VM is seen as on the internet.\nRun:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -s ifconfig.me; echo\n")),(0,r.kt)("p",null,"It should show the ",(0,r.kt)("strong",{parentName:"p"},"public IP of your Proxmox host")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"173.231.226.213"),"),\nnot the VM\u2019s private address. That\u2019s the proof that NAT is working exactly as\nintended."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Curl",src:n(2427).Z,width:"2880",height:"1628"})),(0,r.kt)("p",null,"This set of checks shows that the VM:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Has the correct private IP."),(0,r.kt)("li",{parentName:"ul"},"Can talk to its Proxmox gateway."),(0,r.kt)("li",{parentName:"ul"},"Can reach the internet through NAT."),(0,r.kt)("li",{parentName:"ul"},"Is using the Proxmox host\u2019s public IP for outbound traffic.")),(0,r.kt)("p",null,"With that, your private VM network (",(0,r.kt)("inlineCode",{parentName:"p"},"vmbr1"),") is fully validated."),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Proxmox is a powerful platform for managing virtualized environments, and with\nthe right network configuration it can closely mirror how production data\ncenters operate. In this guide, we installed Proxmox on bare metal, corrected\nthe initial network setup, and configured ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/network/interfaces")," so the host\nsupports three distinct networks:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vmbr0 (Inventory VLAN 365):")," management and utility VMs, plus the Proxmox\nhost itself."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vmbr1 (Compute VLAN 366, NAT):")," private networking where VMs get outbound\ninternet via NAT, ideal for internal systems and test workloads."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"vmbr2 (Provider VLAN 376):")," public-facing VMs with dedicated routed IPs,\ndirectly accessible from the internet.")),(0,r.kt)("p",null,"We demonstrated this by creating an Ubuntu VM, configuring its networking\nduring installation, and validating connectivity with real-world tests. This\ncombination of public-facing and private NAT-backed VMs on the same host gives\nyou the foundation of a true data center-like environment, just like the model\ndescribed in OpenMetal\u2019s networking documentation."),(0,r.kt)("p",null,"From here, you can expand further: add VLANs for storage or control, implement\nfirewalling, or layer in advanced services. The key takeaway is that Proxmox is\nnot just for labs when properly configured, it can simulate or even serve as\nproduction-ready infrastructure."))}m.isMDXComponent=!0},24931:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/admin-204334cf52c728bae975cd5f3a0c6712.png"},77099:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/diagram-3ab4421cb738d581c6849b413bb1e1c1.png"},31027:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/disable-enterprise-f399047ae3b3ef26d68fe7f64e8e5c0e.png"},23290:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/disk-selection-251640b9d405ff29af0878015a97962d.png"},68047:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/filesystem-a4c4a8a8a94697b0abe079f0d7630a8c.png"},69005:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/installation-305e4453905598e134e9ab3b45bbf64a.png"},38091:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ip-a-8d0797f22c11f2e6bfc6d43bd9e00138.png"},91310:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/mgmt-network-31caf038a38ea7e98a015cc477b56e26.png"},15254:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/mount-iso-2171b47b76f619b9f8a9a5f29970fc16.png"},15780:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/no-subscription-e968fa766c96416c3d5f99b73fafdd86.png"},85116:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ping-google-d5364b24f6c4a20933add953517975b1.png"},38648:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ping-ba9d909630626a4f492acdc1d588235c.png"},32637:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ping2-8ef5ce2111591f89575be0acde1377e8.png"},8740:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/proxmox-installer-6239a6b8f5e318546d3427093c3d7c75.png"},2427:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/proxmox-ui-8fd808199503ab9845f41290cb3676f8.png"},27355:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/stormy-vm-1391dff6488fc31271b554c833e6e837.png"},29706:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/summary-e3c2f473ab5dce6bd76cd24785c9bd13.png"},28706:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/timezone-daf4bd7b9049f54332c2cd5ca34ee82c.png"},3207:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ubuntu-network-bb96fca8e313bd63b206d74474d1555a.png"},99338:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/update-ubuntu-41ad8a313ef1f4971c9df4eeba04cf98.png"},21079:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/upgrade-repos-02905d600b9aa6bee404d58474b24ac1.png"},17971:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/upload-iso-acff8085c94844d8ebe552ce725770d7.png"},51373:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/vm-network-8418926ce4085d60f06e341b9927fa17.png"},6990:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/vm-summary-4eb02e943f5fd9d842704bd87ed5dd48.png"}}]);