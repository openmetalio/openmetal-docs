"use strict";(self.webpackChunkopenmetal_docs=self.webpackChunkopenmetal_docs||[]).push([[2626],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var o=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),c=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(s.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},b=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(t),b=r,g=u["".concat(s,".").concat(b)]||u[b]||d[b]||a;return t?o.createElement(g,l(l({ref:n},p),{},{components:t})):o.createElement(g,l({ref:n},p))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,l=new Array(a);l[0]=b;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var c=2;c<a;c++)l[c]=t[c];return o.createElement.apply(null,l)}return o.createElement.apply(null,t)}b.displayName="MDXCreateElement"},31793:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var o=t(87462),r=(t(67294),t(3905));const a={sidebar_position:3},l="How to Enable OpenSearch using Kolla Ansible",i={unversionedId:"day-4/kolla-ansible/opensearch",id:"day-4/kolla-ansible/opensearch",title:"How to Enable OpenSearch using Kolla Ansible",description:"Introduction",source:"@site/versioned_docs/operators-manual/day-4/kolla-ansible/opensearch.md",sourceDirName:"day-4/kolla-ansible",slug:"/day-4/kolla-ansible/opensearch",permalink:"/docs/manuals/operators-manual/day-4/kolla-ansible/opensearch",draft:!1,editUrl:"https://github.com/openmetalio/openmetal-docs/blob/main/versioned_docs/operators-manual/day-4/kolla-ansible/opensearch.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"operatorsSidebar",previous:{title:"How to Deploy an SSL Certificate for OpenStack using Kolla Ansible",permalink:"/docs/manuals/operators-manual/day-4/kolla-ansible/enable-tls"},next:{title:"Security and Your OpenMetal Private Cloud",permalink:"/docs/manuals/operators-manual/day-4/security/security-best-practices"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Prepare Kolla Ansible",id:"prepare-kolla-ansible",level:3},{value:"Root Access to OpenStack Control Plane",id:"root-access-to-openstack-control-plane",level:3},{value:"How to Enable Central Logging",id:"how-to-enable-central-logging",level:2},{value:"Reference",id:"reference",level:2}],p={toc:c};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-enable-opensearch-using-kolla-ansible"},"How to Enable OpenSearch using Kolla Ansible"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"An OpenStack cloud generates a large quantity of log messages. By default,\nthere's no way to visually see a Private Cloud's log messages.  To diagnose\nissues in logs requires using SSH and ",(0,r.kt)("inlineCode",{parentName:"p"},"grep"),", which can be cumbersome due to the\nnumber of hosts and number of OpenStack services.  OpenSearch could be leveraged\nto see all of your cloud's log files from a single location in your browser.\nThis feature set is not enabled by default. In this guide we walk you through\nhow to enable OpenSearch for your Private Cloud using Kolla Ansible."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("h3",{id:"prepare-kolla-ansible"},"Prepare Kolla Ansible"),(0,r.kt)("p",null,"This guide explains how to configure your cloud using Kolla Ansible. Any\ntime you work with Kolla Ansible, you must prepare a shell environment.\nFor more, see ",(0,r.kt)("a",{parentName:"p",href:"./prepare-kolla-ansible"},"How to Prepare and Use Kolla Ansible"),"."),(0,r.kt)("p",null,"All commands are to be executed from the control plane node in which\nKolla Ansible has been prepared."),(0,r.kt)("h3",{id:"root-access-to-openstack-control-plane"},"Root Access to OpenStack Control Plane"),(0,r.kt)("p",null,"Root access to your cloud's control plane nodes is required."),(0,r.kt)("h2",{id:"how-to-enable-central-logging"},"How to Enable Central Logging"),(0,r.kt)("p",null,"To enable OpenSearch, in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/kolla/globals.yml")," ensure the following is set:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"enable_central_logging: 'yes'\n")),(0,r.kt)("p",null,"Adjust data retention policies with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"opensearch_apply_log_retention_policy\nopensearch_soft_retention_period_days\nopensearch_hard_retention_period_days\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note - By default the soft and hard retention periods are 30 and 60 days respectively.")),(0,r.kt)("p",null,"Next, to deploy the configuration changes, use:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# kolla-ansible -i inventory.yml -i ansible/inventory/multinode reconfigure\n")),(0,r.kt)("h2",{id:"reference"},"Reference"),(0,r.kt)("p",null,"Kolla Ansible's ",(0,r.kt)("a",{parentName:"p",href:"https://docs.openstack.org/kolla-ansible/2023.2/reference/logging-and-monitoring/central-logging-guide.html"},"Central\nLogging"),"\nguide."))}u.isMDXComponent=!0}}]);