<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-kubernetes-guides/deployment/magnum-and-kubernetes">
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Magnum and Kubernetes | OpenMetal Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openmetal.io/docs/manuals/tutorials/magnum-and-kubernetes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:site" content="@openmetalio"><meta data-rh="true" name="twitter:creator" content="@openmetalio"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Magnum and Kubernetes | OpenMetal Docs"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/docs/manuals/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openmetal.io/docs/manuals/tutorials/magnum-and-kubernetes"><link data-rh="true" rel="alternate" href="https://openmetal.io/docs/manuals/tutorials/magnum-and-kubernetes" hreflang="en"><link data-rh="true" rel="alternate" href="https://openmetal.io/docs/manuals/tutorials/magnum-and-kubernetes" hreflang="x-default"><link rel="stylesheet" href="/docs/manuals/assets/css/styles.3b9d7053.css">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a href="https://openmetal.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="https://inmotionhosting.github.io/static-assets/logo/open-metal/medium.png" alt="OpenMetal" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://inmotionhosting.github.io/static-assets/logo/open-metal/medium.png" alt="OpenMetal" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><nav class="omi-navbar navbar"><div class="navbar__inner"><div class="navbar_top_row"><a href="https://openmetal.io/schedule-meeting/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">SCHEDULE MEETING</a><a href="https://openmetal.io/free-trial/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">FREE TRIAL</a><a href="https://central.openmetal.io/auth/sign-in" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">LOGIN</a></div><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://openmetal.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="https://inmotionhosting.github.io/static-assets/logo/open-metal/medium.png" alt="OpenMetal" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://inmotionhosting.github.io/static-assets/logo/open-metal/medium.png" alt="OpenMetal" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title"></b></a><div class="custom-navbar-item-dropdown"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" header="IAAS Products" target="_self">Products</a></div><div class="dropdown_menu_container"><ul class="dropdown__menu"><div class="dropdown_menu_left"><h2>IAAS Products</h2><div><li><a href="https://openmetal.io/products/private-cloud/hosted/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="The rich benefits of private cloud now delivered in 45 seconds" itemtype="link">On-Demand Private Cloud</a></li><p>The rich benefits of private cloud now delivered in 45 seconds</p></div><div><li><a href="https://openmetal.io/solutions/on-demand-openstack-cloud/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Production ready OpenStack clusters in 45 seconds. Fully customizable." itemtype="link">On-Demand OpenStack</a></li><p>Production ready OpenStack clusters in 45 seconds. Fully customizable.</p></div><div><li><a href="https://openmetal.io/solutions/on-demand-openstack-cloud/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Large scale clusters for Clickhouse, Spark, Ceph, Hadoop, and more" itemtype="link">Bare Metal Clusters</a></li><p>Large scale clusters for Clickhouse, Spark, Ceph, Hadoop, and more</p></div></div><div class="dropdown_menu_right"><div class="article"><img class="img-responsive" data-src="https://openmetal.io/wp-content/uploads/2022/04/Large-IaaS-Deployments-Featured-Image-768x432.png"><li><a href="https://openmetal.io/products/products/private-pods" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Leverage the on-demand fleet and team for innovative solutions" image_url="https://openmetal.io/wp-content/uploads/2022/04/Large-IaaS-Deployments-Featured-Image-768x432.png" itemtype="article">Large IAAS Deployments</a></li><p>Leverage the on-demand fleet and team for innovative solutions</p></div></div></ul></div></div><div class="custom-navbar-item-dropdown"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" header="IAAS Solutions" target="_self">Solutions</a></div><div class="dropdown_menu_container"><ul class="dropdown__menu"><div class="dropdown_menu_left"><h2>IAAS Solutions</h2><div><li><a href="https://openmetal.io/solutions/saas/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Cost effective infrastructure is critical to good margins" itemtype="link">Private Cloud for SaaS</a></li><p>Cost effective infrastructure is critical to good margins</p></div><div><li><a href="https://openmetal.io/solutions/openstack-public-cloud-providers/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Combined scale yields better costs, new locations, and more features" itemtype="link">OpenStack Public Cloud Providers</a></li><p>Combined scale yields better costs, new locations, and more features</p></div><div><li><a href="https://openmetal.io/solutions/it-modernization/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Bring IT Modernization to your business" itemtype="link">IT Modernization</a></li><p>Bring IT Modernization to your business</p></div><div><li><a href="https://openmetal.io/solutions/on-demand-openstack/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Harness the power of OpenStack to build private clouds at any size, on-demand" itemtype="link">On-Demand OpenStack</a></li><p>Harness the power of OpenStack to build private clouds at any size, on-demand</p></div></div><div class="dropdown_menu_right"><div class="article"><img class="img-responsive" data-src="https://openmetal.io/wp-content/uploads/2021/09/The-OpenMetal-Blog-6-768x432.png"><li><a href="https://openmetal.io/resources/blog/why-your-business-should-be-using-a-private-cloud/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Moving Your Business to Private Cloud Companies are moving towards cloud adoption at record rates, yet there are still business owners ..." image_url="https://openmetal.io/wp-content/uploads/2021/09/The-OpenMetal-Blog-6-768x432.png" itemtype="article">Why Should your Business be Using a Private Cloud</a></li><p>Moving Your Business to Private Cloud Companies are moving towards cloud adoption at record rates, yet there are still business owners ...</p></div></div></ul></div></div><div class="custom-navbar-item-dropdown"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" target="_self">Platform</a></div><div class="dropdown_menu_container"><ul class="dropdown__menu"><div class="dropdown_menu_left"><div><h3><a href="https://openmetal.io/platform/cloud-features/">Private Cloud Overview</a></h3><div><li><a href="https://openmetal.io/platform/cloud-features/cloud-compute/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Compute</a></li></div><div><li><a href="https://openmetal.io/platform/features/block-storage/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Block Storage</a></li></div><div><li><a href="https://openmetal.io/platform/features/networking/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Networking</a></li></div><div><li><a href="https://openmetal.io/platform/features/object-storage/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Object Storage</a></li></div></div><div><h3><a href="https://openmetal.io/solutions/on-demand-openstack-cloud">On-Demand OpenStack Overview</a></h3><div><li><a href="https://openmetal.io/solutions/openstack-public-cloud-providers/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">For Public Cloud Providers</a></li></div><div><li><a href="https://openmetal.io/solutions/saas" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">For SAAS Companies</a></li></div></div><div><h3><a href="https://openmetal.io/platform/cloud-features/bare-metal/">Bare Metal Overview</a></h3></div></div><div class="dropdown_menu_right"><div class="article"><img class="img-responsive" data-src="https://openmetal.io/wp-content/uploads/2021/09/The-OpenMetal-Blog-3-768x432.png"><li><a href="https://openmetal.io/resources/blog/move-from-public-cloud-to-private-cloud/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Cloud Repatriation is the Choice of Cloud Professionals Public cloud users are finding out that for all their convenience and so-called ..." image_url="https://openmetal.io/wp-content/uploads/2021/09/The-OpenMetal-Blog-3-768x432.png" itemtype="article">Why Move from Public Cloud to Private Cloud</a></li><p>Cloud Repatriation is the Choice of Cloud Professionals Public cloud users are finding out that for all their convenience and so-called ...</p></div></div></ul></div></div><div class="custom-navbar-item-dropdown"><a href="https://openmetal.io/iaas-pricing/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a></div><div class="custom-navbar-item-dropdown"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" header="Resources" target="_self">Resources</a></div><div class="dropdown_menu_container"><ul class="dropdown__menu"><div class="dropdown_menu_left"><h2>Resources</h2><div><li><a href="https://openmetal.io/resources/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">OpenMetal Blog</a></li></div><div><li><a href="https://openmetal.io/resources/cloud-industry-events/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Cloud Industry Events</a></li></div><div><li><a href="https://openmetal.io/resources/media-and-press/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Media &amp; Press</a></li></div><div><li><a href="https://openmetal.io/resources/sales-faq/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Sales FAQ</a></li></div><div><li><a href="https://central.openmetal.io/auth/sign-in" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Login to OpenMetal Central</a></li></div></div><div class="dropdown_menu_right"><div class="article"><img class="img-responsive" data-src="https://openmetal.io/wp-content/uploads/2021/08/The-OpenMetal-Blog-4-768x432.png"><li><a href="https://openmetal.io/resources/blog/public-cloud-vs-private-cloud-cost-tipping-points/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="It’s 2022, we know that a vast majority of organizations have adopted either a public cloud or private cloud. Within ..." image_url="https://openmetal.io/wp-content/uploads/2021/08/The-OpenMetal-Blog-4-768x432.png" itemtype="article">A Cost Tipping Point Guide for IT Professionals: Public vs Private Cloud</a></li><p>It’s 2022, we know that a vast majority of organizations have adopted either a public cloud or private cloud. Within ...</p></div></div></ul></div></div><div class="custom-navbar-item-dropdown"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" header="Documentation" target="_self">Docs</a></div><div class="dropdown_menu_container"><ul class="dropdown__menu"><div class="dropdown_menu_left"><h2>Documentation</h2><div><li><a href="https://openmetal.io/docs/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Documentation Home</a></li></div><div><li><a href="https://openmetal.io/docs/manuals/operators-manual" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">OpenStack Operators Manual</a></li></div><div><li><a href="https://openmetal.io/docs/manuals/kubernetes-guides" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Kubernetes</a></li></div><div><li><a href="https://openmetal.io/docs/manuals/users-manual" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">OpenStack Users Manual</a></li></div><div><li><a href="https://openmetal.io/docs/product-guides/private-cloud/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Private Cloud Users</a></li></div><div><li><a href="https://openmetal.io/docs/releases/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Product Release Updates</a></li></div></div><div class="dropdown_menu_right"><div class="article"><img class="img-responsive" data-src="https://openmetal.io/wp-content/uploads/2022/07/Product-Release-Update-v1.5-768x403.png"><li><a href="https://openmetal.io/docs/releases/omi-release-v1-5-new-software-integrations/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="New OpenMetal Integrations with Datadog and SecurityTrails – July 14, 2022Datadog Integration Datadog is a monitoring and security platform for cloud ..." image_url="https://openmetal.io/wp-content/uploads/2022/07/Product-Release-Update-v1.5-768x403.png" itemtype="article">OMI Release V1.5: New Software Integrations</a></li><p>New OpenMetal Integrations with Datadog and SecurityTrails – July 14, 2022Datadog Integration Datadog is a monitoring and security platform for cloud ...</p></div></div></ul></div></div><div class="custom-navbar-item-dropdown"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" header="About Us" target="_self">Company</a></div><div class="dropdown_menu_container"><ul class="dropdown__menu"><div class="dropdown_menu_left"><h2>About Us</h2><div><li><a href="https://openmetal.io/company/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">About OpenMetal</a></li></div><div><li><a href="https://openmetal.io/company/guiding-principles/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Core Guiding Principles</a></li></div><div><li><a href="https://openmetal.io/about-openmetal/team-page/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">The OpenMetal Team</a></li></div><div><li><a href="https://openmetal.io/about-openmetal/data-center-locations/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Data Center Locations</a></li></div><div><li><a href="https://openmetal.io/about-openmetal/network-connectivity/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Network Connectivity</a></li></div><div><li><a href="https://openmetal.io/about-openmetal/support-and-service-levels/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Support and Service Levels</a></li></div><div><li><a href="https://openmetal.io/company/contact-us/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="" itemtype="link">Contact Us</a></li></div></div><div class="dropdown_menu_right"><div class="article"><img class="img-responsive" data-src="https://openmetal.io/wp-content/uploads/2022/03/The-OpenMetal-Blog-7-1-768x432.png"><li><a href="https://openmetal.io/resources/blog/openmetal-and-supermicro-success-story/" target="_self" rel="noopener noreferrer" class="dropdown__link" description="Success Story: InMotion Hosting and Supermicro Join Forces Supermicro recently published a success story describing how InMotion Hosting built an on-demand private cloud ..." image_url="https://openmetal.io/wp-content/uploads/2022/03/The-OpenMetal-Blog-7-1-768x432.png" itemtype="article">Success Story: OpenStack On-Demand Private Clouds in Less than an Hour</a></li><p>Success Story: InMotion Hosting and Supermicro Join Forces Supermicro recently published a success story describing how InMotion Hosting built an on-demand private cloud ...</p></div></div></ul></div></div></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/manuals/">Documentation Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/manuals/operators-manual/">Operator&#x27;s Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operator&#x27;s Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/manuals/users-manual/">User&#x27;s Manual</a><button aria-label="Toggle the collapsible sidebar category &#x27;User&#x27;s Manual&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/manuals/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/manuals/kubernetes-guides/">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/manuals/kubernetes-guides/installing-an-openshift-cluster-on-openstack">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manuals/kubernetes-guides/installing-an-openshift-cluster-on-openstack">Installing an OpenShift cluster on OpenStack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manuals/kubernetes-guides/installing-a-rancher-cluster-on-openstack">Installing a Rancher managed cluster on OpenStack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manuals/kubernetes-guides/deploying-a-kubespray-cluster-to-openstack-using-terraform">Deploying a Kubespray cluster to OpenStack using Terraform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/manuals/kubernetes-guides/installing-a-kops-cluster-on-openstack">Installing a kOps cluster on OpenStack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/manuals/tutorials/magnum-and-kubernetes">Magnum and Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/manuals/kubernetes-guides/installing-the-kubernetes-openstack-cloud-controller-manager">OpenStack Provider</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/manuals/engineers-notes/building-windows-cloud-images-on-openmetal">Engineer&#x27;s Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/manuals/openmetal-central/">OpenMetal Central</a><button aria-label="Toggle the collapsible sidebar category &#x27;OpenMetal Central&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/manuals/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/manuals/kubernetes-guides/"><span itemprop="name">Kubernetes</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Magnum and Kubernetes</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Magnum and Kubernetes</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Kubernetes in OpenStack is made possible by
<a href="https://docs.openstack.org/magnum/latest/user/" target="_blank" rel="noopener noreferrer">Magnum</a>, a container
orchestration engine service.</p><p>In this guide, you will learn how to deploy a Kubernetes cluster using
Horizon. The process this guide outlines is to first deploy the cluster,
confirm the creation of the cluster, and finally demonstrate working
with the Kubernetes cluster.</p><p>Get started by looking over the prerequisites required before the
cluster can be created.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="magnum-deployment-details">Magnum Deployment Details<a class="hash-link" href="#magnum-deployment-details" title="Direct link to heading">​</a></h2><p>With Private Cloud Core OpenStack clouds, the deployment of Magnum
integrates with the <a href="https://github.com/kubernetes/cloud-provider-openstack" target="_blank" rel="noopener noreferrer">Kubernetes OpenStack Cloud Provider</a>.
Presently,
<a href="https://github.com/kubernetes/cloud-provider-openstack/tree/release-1.18" target="_blank" rel="noopener noreferrer">release-1.18</a>
of this repository is used.</p><p>The following items have been integrated:</p><ul><li><a href="https://github.com/kubernetes/cloud-provider-openstack/blob/release-1.18/docs/using-openstack-cloud-controller-manager.md" target="_blank" rel="noopener noreferrer">OpenStack Cloud Controller Manager</a></li><li><a href="https://github.com/kubernetes/cloud-provider-openstack/blob/release-1.18/docs/using-octavia-ingress-controller.md#deploy-octavia-ingress-controller-in-the-kubernetes-cluster" target="_blank" rel="noopener noreferrer">Octavia Ingress Controller</a></li><li><a href="https://github.com/kubernetes/cloud-provider-openstack/blob/release-1.18/docs/using-cinder-csi-plugin.md" target="_blank" rel="noopener noreferrer">Cinder CSI Plugin</a></li></ul><p>For an example of how to set up load balancing, see
<a href="https://github.com/kubernetes/cloud-provider-openstack/blob/release-1.18/docs/using-octavia-ingress-controller.md#setting-up-http-load-balancing-with-ingress" target="_blank" rel="noopener noreferrer">Setting up HTTP Load Balancing with Ingress</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><p>This section explains what is required before creating a Kubernetes
cluster.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-roles">Project Roles<a class="hash-link" href="#project-roles" title="Direct link to heading">​</a></h3><p>To create a Kubernetes cluster, you must either be the <code>admin</code> user, own
the current project, or your user must have the &quot;Load Balancer Admin&quot;
role.</p><p><strong>Note</strong> -- The &quot;Load Balancer Admin&quot; role appears as
<code>load-balancer_admin</code> in Horizon.</p><p>This guide uses the user <code>admin</code> and is working out of the default
<code>admin</code> project.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-quotas">Project Quotas<a class="hash-link" href="#project-quotas" title="Direct link to heading">​</a></h3><p>The project in which you are working needs to have enough resources
available to it.</p><p>For example, spinning up a cluster with three masters and three workers
using the <code>m1.small</code> flavor requires the following resources:</p><ul><li>6 Instances</li><li>6 VCPUs</li><li>24GB RAM</li><li>150GB Volume space</li><li>1 Network</li><li>1 Router</li></ul><p>To see current project quotas, navigate in Horizon to <strong>Project -<!-- -->&gt;<!-- -->
Compute -<!-- -->&gt;<!-- --> Overview</strong>.</p><p>To adjust project quotas, as a user with the <code>admin</code> role, navigate in
Horizon to <strong>Identity -<!-- -->&gt;<!-- --> Projects</strong>, find the project in the list, and
from the drop down on the right, choose <strong>Modify Quotas</strong>.</p><p>You can also set quotas to <code>-1</code> to allow unlimited of a resource type.</p><p>In this guide, the project&#x27;s quotas are set to:</p><ul><li>Instances: -1</li><li>VCPUs: -1</li><li>RAM: -1</li><li>Volumes: -1</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openstackclient">OpenStackClient<a class="hash-link" href="#openstackclient" title="Direct link to heading">​</a></h3><p>This guide assumes OpenStackClient has been installed and pointed to the
appropriate project. For information on how to install OpenStackClient,
see <a href="https://central.openmetal.io/documentation/operators-manual/how-to-install-and-use-openstack-s-cli/" target="_blank" rel="noopener noreferrer">How to Install and Use OpenStack&#x27;s CLI</a>.</p><p>To confirm the cluster status using the command line, OpenStackClient
requires the Python package <code>python-magnumclient</code>.</p><p>Install this package using:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install python-magnumclient</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="procedure">Procedure<a class="hash-link" href="#procedure" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-kubernetes-cluster">Create Kubernetes Cluster<a class="hash-link" href="#create-kubernetes-cluster" title="Direct link to heading">​</a></h3><p>To create a Kubernetes cluster, navigate in Horizon to <strong>Project -<!-- -->&gt;<!-- -->
Container Infra -<!-- -->&gt;<!-- --> Clusters</strong>, and follow the <strong>Create Cluster</strong> link.</p><p><img loading="lazy" alt="image" src="/docs/manuals/assets/images/umx_kube_cluster_list-c03642a825fe21d88aafc3934a3c1cbf.png" width="1506" height="466" class="img_ev3q"></p><hr><p>Fill the form sections out as outlined in the following steps.</p><p><strong>Step 1</strong> -- Details</p><p><img loading="lazy" alt="image" src="/docs/manuals/assets/images/umx_kube_cluster_form_1-4e83a5883f3e2b9a2b4528a0a8938148.png" width="966" height="723" class="img_ev3q"></p><p>Fill out the following fields:</p><ul><li><strong>Cluster Name</strong> -- <code>kubernetes-demo</code></li><li><strong>Cluster Template</strong> -- <code>kubernetes-v1.18.2</code></li><li><strong>Keypair</strong> -- Your SSH key</li></ul><p><strong>Step 2</strong> -- Size</p><p><img loading="lazy" alt="image" src="/docs/manuals/assets/images/umx_kube_cluster_form_2-c40ec44c5f3edb9a4c1777823610bcc3.png" width="965" height="615" class="img_ev3q"></p><p>Fill out the following fields:</p><ul><li><strong>Number of Master Nodes</strong>: 3</li><li><strong>Flavor of Master Nodes</strong>: <code>m1.small</code></li><li><strong>Number of Worker Nodes</strong>: 3</li><li><strong>Flavor of Worker Nodes</strong>: <code>m1.small</code></li></ul><p><strong>Step 3</strong> -- Network</p><p><img loading="lazy" alt="image" src="/docs/manuals/assets/images/umx_kube_cluster_form_3-ee87af0cf93ff8b73e43122893874890.png" width="965" height="507" class="img_ev3q"></p><p>Fill out the following fields:</p><ul><li><strong>Enable Load Balancer for Master Nodes</strong>: Ensure this is checked</li><li><strong>Create New Network</strong>: Ensure this is checked</li><li><strong>Cluster API</strong>: Ensure &quot;Accessible on private network only&quot; is
selected</li></ul><p><strong>Step 4</strong> -- Create Cluster</p><p>You can now create the Kubernetes cluster. Allow 10 - 15 minutes for
cluster creation.</p><p>Once the form is submitted, you will be taken back to the cluster list
where you will see the cluster being created with <strong>Status</strong>,
<code>CREATE_IN_PROGRESS</code>:</p><p><img loading="lazy" alt="image" src="/docs/manuals/assets/images/umx_kube_create_in_progress-14bbc596912a2ef5e69ef81238b7d411.png" width="1506" height="126" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="check-status-of-the-kubernetes-cluster">Check Status of the Kubernetes Cluster<a class="hash-link" href="#check-status-of-the-kubernetes-cluster" title="Direct link to heading">​</a></h2><p>This section explains how to check the status the Kubernetes cluster
using OpenStackClient.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-openstackclient">Prepare OpenStackClient<a class="hash-link" href="#prepare-openstackclient" title="Direct link to heading">​</a></h3><p>Before beginning, ensure OpenStackClient is installed and pointed to the
appropriate project.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-python-magnumclient">Install <code>python-magnumclient</code><a class="hash-link" href="#install-python-magnumclient" title="Direct link to heading">​</a></h3><p>Next install Magnum&#x27;s CLI, <code>python-magnumclient</code> using <code>pip</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install python-magnumclient</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-heat-stacks">List Heat Stacks<a class="hash-link" href="#list-heat-stacks" title="Direct link to heading">​</a></h3><p>Next, you will need to list the Heat stacks. This output includes the
Kubernetes stack created previously.</p><p>List Heat stacks using <code>openstack stack list</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openstack stack list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------+------------------------------+--------------------+----------------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ID                                   | Stack Name                   | Stack Status       | Creation Time        | Updated Time |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------+------------------------------+--------------------+----------------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 545b100b-ba3c-4366-9d68-eca7b1df98b6 | kubernetes-demo-ojlnzq4w252q | CREATE_IN_PROGRESS | 2021-06-14T21:19:35Z | None         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------+------------------------------+--------------------+----------------------+--------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the stack created previously appended with random
characters. In this example, the stack is named
<code>kubernetes-demo-ojlnzq4w252q</code>. Take note of the name as it will be used
in the next section.</p><p>OpenStack uses <a href="https://docs.openstack.org/heat/latest/" target="_blank" rel="noopener noreferrer">Heat</a> for
template-based orchestration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-deployment-status">Check deployment status<a class="hash-link" href="#check-deployment-status" title="Direct link to heading">​</a></h3><p>To check the status of the deployment, use
<code>openstack stack resourcelist &lt;stack-name&gt;</code>,
where <code>&lt;stack-name&gt;</code> is the name of the stack.</p><p>Check status of stack <code>kubernetes-demo-ojlnzq4w252q</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openstack stack resource list kubernetes-demo-ojlnzq4w252q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------+--------------------------------------+--------------------------------------------------------------------------------------+--------------------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| resource_name                 | physical_resource_id                 | resource_type                                                                        | resource_status    | updated_time         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------+--------------------------------------+--------------------------------------------------------------------------------------+--------------------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| kube_cluster_deploy           |                                      | OS::Heat::SoftwareDeployment                                                         | INIT_COMPLETE      | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| kube_cluster_config           |                                      | OS::Heat::SoftwareConfig                                                             | INIT_COMPLETE      | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| secgroup_rule_tcp_kube_minion | 4a76ee7a-dde2-4190-9ccf-6a144d7d42a4 | OS::Neutron::SecurityGroupRule                                                       | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| api_address_floating_switch   |                                      | Magnum::FloatingIPAddressSwitcher                                                    | INIT_COMPLETE      | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| kube_minions                  |                                      | OS::Heat::ResourceGroup                                                              | INIT_COMPLETE      | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| etcd_address_lb_switch        |                                      | Magnum::ApiGatewaySwitcher                                                           | INIT_COMPLETE      | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| api_address_lb_switch         |                                      | Magnum::ApiGatewaySwitcher                                                           | INIT_COMPLETE      | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| kube_masters                  | 2f5b992c-c15e-4650-95e4-c7348efc7f7e | OS::Heat::ResourceGroup                                                              | CREATE_IN_PROGRESS | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| etcd_lb                       | 3a8df57f-2f43-4af1-9248-bd886c392344 | file:///usr/lib/python3.6/site-packages/magnum/drivers/common/templates/lb_etcd.yaml | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| api_lb                        | 2455a996-b772-4664-b99e-c7a67ca9285b | file:///usr/lib/python3.6/site-packages/magnum/drivers/common/templates/lb_api.yaml  | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| network                       | 90947279-ec72-4ed6-9e62-6e5501e0bd1d | file:///usr/lib/python3.6/site-packages/magnum/drivers/common/templates/network.yaml | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| worker_nodes_server_group     | d135f907-5e8e-4a2c-b3fd-397418837d8d | OS::Nova::ServerGroup                                                                | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| secgroup_rule_udp_kube_minion | c0892f17-4d46-403b-9cf9-6e89d95bc0f1 | OS::Neutron::SecurityGroupRule                                                       | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| secgroup_kube_minion          | 8d130ac5-c356-43d9-bdcb-a7b779610638 | OS::Neutron::SecurityGroup                                                           | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| secgroup_kube_master          | 6e52a531-762a-4f29-b85f-c149c5b461f1 | OS::Neutron::SecurityGroup                                                           | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| master_nodes_server_group     | f2235409-575e-4fb8-b3b8-cde0fc1ed9da | OS::Nova::ServerGroup                                                                | CREATE_COMPLETE    | 2021-06-14T21:19:35Z |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------+--------------------------------------+--------------------------------------------------------------------------------------+--------------------+----------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the column <strong>resource<!-- -->_<!-- -->status</strong> reflects <code>CREATE_COMPLETE</code> for all
items, the Kubernetes deployment is done.</p><p>It will take around 10 to 15 minutes for everything to finish deploying.</p><p>Kubernetes deployed by Magnum is handled by a series of Heat stacks.</p><blockquote><p><strong>Note!</strong> You cannot move on with this guide if the deployment is
not completely finished.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-kubernetes-cluster">Test Kubernetes Cluster<a class="hash-link" href="#test-kubernetes-cluster" title="Direct link to heading">​</a></h2><p>Once the deployment is complete, you can test the Kubernetes cluster.
This section briefly explains how to do this.</p><hr><p>The following steps are all run in a local development, or testing,
environment and assumes OpenStackClient is installed and pointed to the
appropriate project.</p><ol><li><p>Obtain a copy of <code>kubectl</code> and make it executable:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x kubectl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Create testing directory:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir k8s-test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Obtain cluster configuration:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openstack coe cluster config --dir k8s-test kubernetes-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Set the <code>KUBECONFIG</code> environment variable by executing the output of the
previous step:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">```sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export KUBECONFIG=/home/&lt;user&gt;/k8s-test/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Interact with the cluster using <code>./kubectl get svc -A</code>.</p></li></ol><p>For example:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./kubectl get svc -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE     NAME                            TYPE        CLUSTER-IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXTERNAL-IP   PORT(S)                  AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default       kubernetes                      ClusterIP   10.254.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;none&gt;        443/TCP                  115m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   csi-cinder-controller-service   ClusterIP   10.254.98.104</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;none&gt;        12345/TCP                114m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-dns                        ClusterIP   10.254.0.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;none&gt;        53/UDP,53/TCP,9153/TCP   115m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-resize-a-kubernetes-clusters-node-count">How to Resize a Kubernetes Cluster&#x27;s Node Count<a class="hash-link" href="#how-to-resize-a-kubernetes-clusters-node-count" title="Direct link to heading">​</a></h2><p>At present, there is an issue with resizing a Kubernetes cluster&#x27;s node
count using Horizon. To perform this task, you must perform the action
over SSH using OpenStackClient.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resize-prerequisites">Resize Prerequisites<a class="hash-link" href="#resize-prerequisites" title="Direct link to heading">​</a></h3><p>Before preparing OpenStackClient, ensure a user with the admin role is
associated with the project under which the Kubernetes cluster exists.
Next, download the OpenStack RC file for the appropriate project and
user. Finally, source this file to prepare your local shell.</p><p>This guide assumes OpenStackClient has been installed and pointed to the
appropriate project. For information on how to install OpenStackClient,
see <a href="https://central.openmetal.io/documentation/operators-manual/how-to-install-and-use-openstack-s-cli/" target="_blank" rel="noopener noreferrer">How to Install and Use OpenStack&#x27;s CLI</a>.</p><p>In addition, <code>python-magnumclient</code> needs to be installed to work with
the Kubernetes cluster. This can be installed using <code>pip install
python-magnumclient</code>.</p><p>Once the environment is prepared, you can issue the command to resize
the cluster.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resize-procedure">Resize Procedure<a class="hash-link" href="#resize-procedure" title="Direct link to heading">​</a></h3><p>To resize the cluster, you need to first list all clusters to get the
UUID.</p><p>For example:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openstack coe cluster list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the above output, copy the cluster&#x27;s UUID.</p><p>To resize a cluster to 3 nodes for example, use the following command,
where <code>&lt;cluster-uuid&gt;</code> should be replaced with the actual UUID:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openstack coe cluster resize &lt;cluster-uuid&gt; 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h3><p>This section will be filled as common failure scenarios and solutions
are collected. For general troubleshooting see the <a href="https://docs.openstack.org/magnum/latest/admin/troubleshooting-guide.html" target="_blank" rel="noopener noreferrer">Magnum Troubleshooting Guide</a>
from OpenStack&#x27;s documentation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openmetalio/openmetal-docs/blob/main/docs/kubernetes-guides/deployment/magnum-and-kubernetes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/manuals/kubernetes-guides/installing-a-kops-cluster-on-openstack"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Installing a kOps cluster on OpenStack</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/manuals/kubernetes-guides/installing-the-kubernetes-openstack-cloud-controller-manager"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installing the Kubernetes OpenStack Cloud Controller Manager</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#magnum-deployment-details" class="table-of-contents__link toc-highlight">Magnum Deployment Details</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#project-roles" class="table-of-contents__link toc-highlight">Project Roles</a></li><li><a href="#project-quotas" class="table-of-contents__link toc-highlight">Project Quotas</a></li><li><a href="#openstackclient" class="table-of-contents__link toc-highlight">OpenStackClient</a></li></ul></li><li><a href="#procedure" class="table-of-contents__link toc-highlight">Procedure</a><ul><li><a href="#create-kubernetes-cluster" class="table-of-contents__link toc-highlight">Create Kubernetes Cluster</a></li></ul></li><li><a href="#check-status-of-the-kubernetes-cluster" class="table-of-contents__link toc-highlight">Check Status of the Kubernetes Cluster</a><ul><li><a href="#prepare-openstackclient" class="table-of-contents__link toc-highlight">Prepare OpenStackClient</a></li><li><a href="#install-python-magnumclient" class="table-of-contents__link toc-highlight">Install <code>python-magnumclient</code></a></li><li><a href="#list-heat-stacks" class="table-of-contents__link toc-highlight">List Heat Stacks</a></li><li><a href="#check-deployment-status" class="table-of-contents__link toc-highlight">Check deployment status</a></li></ul></li><li><a href="#test-kubernetes-cluster" class="table-of-contents__link toc-highlight">Test Kubernetes Cluster</a></li><li><a href="#how-to-resize-a-kubernetes-clusters-node-count" class="table-of-contents__link toc-highlight">How to Resize a Kubernetes Cluster&#39;s Node Count</a><ul><li><a href="#resize-prerequisites" class="table-of-contents__link toc-highlight">Resize Prerequisites</a></li><li><a href="#resize-procedure" class="table-of-contents__link toc-highlight">Resize Procedure</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="omi-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Products</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/products/private-cloud/hosted/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>On-Demand Private Cloud</span></a></li><li class="footer__item"><a href="https://openmetal.io/products/large-iaas-deployments/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Large Deployments</span></a></li><li class="footer__item"><a href="https://openmetal.io/products/private-pods/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Private Pods</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Solutions</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/solutions/saas/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>SaaS Cloud</span></a></li><li class="footer__item"><a href="https://openmetal.io/solutions/it-modernization/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>IT Modernization</span></a></li><li class="footer__item"><a href="https://openmetal.io/solutions/openstack-public-cloud-providers/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Public Cloud Providers</span></a></li><li class="footer__item"><a href="https://openmetal.io/solutions/on-demand-openstack-cloud/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>On-Demand OpenStack</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Platform</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/platform/openstack-services/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>OpenStack Services</span></a></li><li class="footer__item"><a href="https://openmetal.io/platform/features/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Features and Components</span></a></li><li class="footer__item"><a href="https://openmetal.io/platform/locations/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Global Locations</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Pricing</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/pricing/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>On-Demand Pricing</span></a></li><li class="footer__item"><a href="https://openmetal.io/resources/sales-faq/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>General Sales FAQ</span></a></li><li class="footer__item"><a href="https://openmetal.io/free-trial/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Free Trial</span></a></li><li class="footer__item"><a href="https://openmetal.io/schedule-meeting/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Schedule a Meeting</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/blog/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>OpenMetal Blog</span></a></li><li class="footer__item"><a href="https://openmetal.io/resources/cloud-industry-events/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Cloud Industry Events</span></a></li><li class="footer__item"><a href="https://openmetal.io/resources/sales-faq/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Sales FAQ</span></a></li><li class="footer__item"><a href="https://central.openmetal.io/auth/sign-in" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Login to OpenMetal Central</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/docs/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Documentation Home</span></a></li><li class="footer__item"><a href="https://openmetal.io/docs/manuals/operators-manual" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>OpenStack Operator’s Manual</span></a></li><li class="footer__item"><a href="https://openmetal.io/docs/manuals/users-manual" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>OpenStack User’s Manual</span></a></li><li class="footer__item"><a href="https://openmetal.io/docs/product-guides/private-cloud/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Private Cloud Users</span></a></li><li class="footer__item"><a href="https://openmetal.io/docs/manuals/kubernetes-guides" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Kubernetes</span></a></li><li class="footer__item"><a href="https://openmetal.io/docs/releases/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Product Release Updates</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/company/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>About OpenMetal</span></a></li><li class="footer__item"><a href="https://openmetal.io/company/guiding-principles/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Core Guiding Principles</span></a></li><li class="footer__item"><a href="https://openmetal.io/company/contact-us/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Contact Us</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://openmetal.io/company/legal/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Terms of Service</span></a></li><li class="footer__item"><a href="https://openmetal.io/company/legal/privacy-policy/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Privacy Policy</span></a></li><li class="footer__item"><a href="https://openmetal.io/company/legal/donotsellmypersonaldata/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Do Not Sell My Personal Data</span></a></li><li class="footer__item"><a href="https://openmetal.io/company/legal/accessibility-statement/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Accessibility Statement</span></a></li><li class="footer__item"><a href="https://openmetal.io/company/legal/legal-inquiries/" target="_self" rel="noopener noreferrer" class="footer__link-item"><span>Legal Inquiries and DMCA</span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="https://inmotionhosting.github.io/static-assets/logo/open-metal/medium.png" alt="Openmetal Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="160px"><img src="https://inmotionhosting.github.io/static-assets/logo/open-metal/medium.png" alt="Openmetal Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="160px"></div><div class="footer__copyright"><strong>2023 © OpenMetal, a division of <a href="https://www.inmotionhosting.com" target="_blank" rel="noopener">InMotion Hosting</a>.  All rights reserved.</strong></div></div><div class="footerContact_WzGC"><p>555 S. Independence Blvd, Virginia Beach, VA 23452</p><div class="contactLinks_Ri0r"><a href="tel:+18777289664">877-7-BUY-OMI</a><a href="mailto:sales@openmetal.io">sales@openmetal.io</a><a href="https://openmetal.io/schedule-meeting/">Schedule a Demo</a></div><p><strong>OpenMetal Central:</strong> <a target="_blank" href="https://central.openmetal.io/auth/sign-in">Login</a> or <a target="_blank" href="https://central.openmetal.io/sign-up">Create New Account</a></p></div></div></footer></div>
<script src="/docs/manuals/assets/js/runtime~main.83d80e36.js"></script>
<script src="/docs/manuals/assets/js/main.c6da910c.js"></script>
</body>
</html>